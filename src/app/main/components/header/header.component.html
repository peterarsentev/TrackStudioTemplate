<div class="d-flex wrapper" id="wrapper">
  <aside id="resizable" class="sidebar-left movable-div bottom-0 left-0 animated">
    <app-left-side-bar *ngIf="navShow"></app-left-side-bar>
    <div class="draghandle"
         id="draghandle"
         (mousedown)="initResize()"
         (mouseup)="stopResize($event)"
         style="width: 10px; height: 100vh;"></div>
  </aside>
  <div id="page-content-wrapper">
    <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
      <i
        *ngIf="navShow"
        [ngClass]="{'fa-angle-left': !toggled, 'fa-angle-right': toggled}"
        class="fa mr-lg-3"
        style="font-size: 23px; cursor: pointer"
        aria-hidden="true"
        id="menu-toggle"
        (click)="onToggle()"
      ></i>
      <a class="navbar-brand mr-auto" (click)="goMain(); onToggle()">Job4j</a>

      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarText"
        aria-controls="navbarText"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div *ngIf="navShow" class="collapse navbar-collapse" id="navbarText">
        <ul class="navbar-nav mr-auto"></ul>
        <span class="input-group mr-3 w-50">
          <input
            type="text"
            #text
            class="form-control"
            placeholder="Поиск"
            aria-label="Поиск"
            aria-describedby="basic-addon2"/>
           <div *ngIf="searchResult" (click)="clearSearch()" class="dropdown-menu2">
             <div *ngIf="searchResult.tasks">
             <p class="dropdown-header">Задачи</p>
              <div role="separator" class="dropdown-divider"></div>
                <a *ngFor="let t of searchResult.tasks" class="dropdown-item"
                   routerLink="/discuss/{{t.id}}">{{t.name}}</a>
             <div role="separator" class="dropdown-divider"></div>
               </div>
             <div *ngIf="searchResult.exercises">
              <p class="dropdown-header">Упражнения</p>
              <div role="separator" class="dropdown-divider"></div>
                   <a *ngFor="let e of searchResult.exercises"
                      class="dropdown-item" routerLink="/discuss/{{e.id}}">{{e.name}}</a>
              <div role="separator" class="dropdown-divider"></div>
               </div>
             <div *ngIf="searchResult.discuss">
                   <p class="dropdown-header">Обсуждения</p>
                   <div role="separator" class="dropdown-divider"></div>
                   <a *ngFor="let d of searchResult.discuss"
                      class="dropdown-item" routerLink="/discuss/{{d.id}}">{{d.name}}</a>
             </div>
      </div>
          <span class="input-group-append">
            <button (click)="search(text.value)" class="btn btn-outline-secondary" type="button">
              <i class="fa fa-search" aria-hidden="true"></i>
            </button>
          </span>
        </span>
        <span class="navbar-text mr-3">
          <a [routerLink]="['/']"
          ><i class="fa fa-home fa-2x" aria-hidden="true"></i></a>
        </span>
        <span *ngIf="notifications && count > 0"
              style="cursor: pointer;"
              (click)="readMessages()"
              class="ml-3 badge badge-primary badge-pill"
        >{{ count }}</span>
        <a class="nav-item nav-link float-right" [routerLink]="['/profile']">{{
          user?.name || "Гость"
          }}</a>
        <a class="nav-item nav-link float-right"
           (click)="clearStorage()"
           [routerLink]="['/login']"
        >Выйти</a>
      </div>
    </nav>
    <app-admin-message *ngIf="message" [message]="message"></app-admin-message>
    <div class="container-fluid">
      <app-navigation (getMessage)="getMessage()"
                      *ngIf="navShow"
      ></app-navigation>
      <router-outlet></router-outlet>
    </div>
  </div>
</div>
<div
  class="pr-lg-5 pb-lg-5"
  style="position: fixed; bottom: 0; right: 0; z-index: 1;"
>
  <div class="mb-4" style="cursor: pointer;" onclick="window.scrollTo(0, 0);">
    <i class="fas fa-arrow-circle-up fa-lg"></i>
  </div>
  <div *ngIf="iconComment" class="mb-2" style="cursor: pointer;">
    <i (click)="goToComments()" class="fas fa-comment fa-lg" aria-hidden="true"></i>
  </div>
  <div
    style="cursor: pointer;"
    onclick="window.scrollTo(0, document.body.scrollHeight);"
  >
    <i class="fas fa-arrow-circle-down fa-lg"></i>
  </div>
</div>
<app-footer></app-footer>
