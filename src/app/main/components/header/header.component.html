<div class="d-flex" id="wrapper" [ngClass]="{'toggled': toggled}">
<!--  <div id="sidebar">-->
  <div *ngIf="navShow" class="bg-dark border-right text-white" id="sidebar-wrapper">
    <div class="list-group list-group-flush small">
      <div class="list-group-item list-group-item-action bg-secondary text-white">Навигация</div>
      <div class="ml-3 pb-2">
        <tree-root [nodes]="nodes"
                   [focused]="true"
                   [options]="options">
        </tree-root>
      </div>
    </div>
    <div class="list-group list-group-flush small ">
      <a (click)="showItems()" class="list-group-item list-group-item-action bg-secondary text-white">
        Закладки
        <i *ngIf="items"  class="fas fa-chevron-up fa_icons mr-3"></i>
        <i *ngIf="!items" class="fas fa-chevron-down fa_icons mr-3"></i>
      </a>
      <ng-container *ngIf="!!items">
        <ul class="list-unstyled">
          <li>
            <a [routerLink]="['/']" class="list-group-item list-group-item-action bg-dark text-white">
              <i class="fas fa-info mr-2"></i><span class="font-weight-bold">Процесс обучения</span>
            </a>
          </li>
          <li>
            <a [routerLink]="['/task']" [queryParams]="{taskId: 'ae84b50d554cbf1d01558646352721c5', action: 'task'}"
               class="list-group-item list-group-item-action bg-dark text-white">
              <i class="fas fa-info mr-2"></i><span class="font-weight-bold">Реквизиты</span>
            </a>
          </li>
          <li>
            <a [routerLink]="['/tasks']" [queryParams]="{taskId: 'ae84b50d571fe2340157387103bd1a68', action: 'tasks'}"
               class="list-group-item list-group-item-action bg-dark text-white">
              <i class="fas fa-info mr-2"></i><span class="font-weight-bold">Критика и предложения</span>
            </a>
          </li>
          <li *ngFor="let book of bookmarks">
            <a class="list-group-item list-group-item-action bg-dark text-white">
              <span (click)="goToBook(book)" style="cursor: pointer" class="font-weight-bold">{{ book.name }}</span>
              <span (click)="deleteBook(book)" class="pull-right font-weight-bold" style="cursor: pointer">
                <i class="fas fa-remove" aria-hidden="true"></i>
              </span>
            </a>
          </li>
        </ul>
      </ng-container>
      <a (click)="showProven()" class="list-group-item list-group-item-action bg-secondary text-white">
        Проверенные задачи
        <i *ngIf="proven"  class="fas fa-chevron-up fa_icons mr-3"></i>
        <i *ngIf="!proven" class="fas fa-chevron-down fa_icons mr-3"></i>
      </a>
      <ng-container *ngIf="!!proven && !!provenTasks?.length">
        <ul class="list-unstyled">
          <li *ngFor="let task of provenTasks">
            <a  [routerLink]="['/task']" [queryParams]="{taskId: task.task.id, action: 'task'}"
                class="list-group-item list-group-item-action bg-dark text-white">
                <span class="font-weight-bold">
                  <i class="fas fa-tasks mr-2 bg-warning"></i>{{ task.task.name}} &nbsp;[#{{task.task.number}}]
              </span>
            </a>
          </li>
        </ul>
      </ng-container>
      <a (click)="showNew()" class="list-group-item list-group-item-action bg-secondary text-white">
        Новые задачи
        <i *ngIf="newTask"  class="fas fa-chevron-up fa_icons mr-3"></i>
        <i *ngIf="!newTask" class="fas fa-chevron-down fa_icons mr-3"></i>
      </a>
      <ng-container *ngIf="newTask && !!newTasks?.length">
        <ul class="list-unstyled">
          <li *ngFor="let task of newTasks">
            <a  [routerLink]="['/task']" [queryParams]="{taskId: task.task.id, action: 'task'}"
                class="list-group-item list-group-item-action bg-dark text-white">
               <span class="font-weight-bold">
                  <i class="fas fa-tasks mr-2 bg-danger"></i>{{ task.task.name}} &nbsp;[#{{task.task.number}}]
              </span>
            </a>
          </li>
        </ul>
      </ng-container>
    </div>
  </div>
<!--  </div>-->
  <div id="page-content-wrapper">
    <nav class="navbar navbar-expand-lg navbar-light bg-dark border-bottom">
      <i *ngIf="navShow" class="fa fa-bars mr-2" style="font-size:23px" aria-hidden="true" id="menu-toggle" (click)="onToggle()"></i>
      <a class="navbar-brand text-white" (click)="goMain()">Job4j</a>
      <a class="navbar-brand text-white" href="https://job4j.ru/edu/">
        <i *ngIf="navShow" class="fa fa-sun-o ml-2 fa-inverse"></i>
      </a>
      <button class="navbar-toggler navbar-dark" type="button" data-toggle="collapse"
              data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div *ngIf="navShow" class="collapse navbar-collapse" id="navbarText">
        <ul class="navbar-nav mr-auto">
        </ul>
        <span class="input-group mr-3 w-50">
          <input type="text" class="form-control bg-dark" placeholder="Поиск" aria-label="Поиск" aria-describedby="basic-addon2">
          <span class="input-group-append">
            <button class="btn btn-outline-secondary" type="button"><i class="fa fa-search" aria-hidden="true"></i></button>
          </span>
        </span>
        <span class="navbar-text">
            <a [routerLink]="['/']"><i class="fa fa-home fa-2x fa-inverse" aria-hidden="true"></i></a>
          </span>
        <span *ngIf="notifications && count > 0" style="cursor: pointer;"
              (click)="readMessages()"
              class="ml-3 badge badge-primary badge-pill">{{count}}</span>
        <a class="nav-item nav-link float-right" [routerLink]="['/profile']">{{ user?.name || 'Гость' }}</a>
        <a class="nav-item nav-link float-right" (click)="clearStorage()" [routerLink]="['/login']">Выйти</a>
      </div>
    </nav>
    <div class="container-fluid">
      <app-navigation
        (emitter)="emmit($event)"
        *ngIf="navShow"></app-navigation>
      <router-outlet></router-outlet>
    </div>
  </div>
</div>
<div class="pr-lg-5 pb-lg-5" style="position: fixed; bottom: 0; right: 0; z-index: 1;">
  <div class="mb-4" style="cursor: pointer" onclick="window.scrollTo(0, 0);">
    <i class="fas fa-arrow-circle-up fa-lg"></i>
  </div>
  <div style="cursor: pointer" onclick="window.scrollTo(0, document.body.scrollHeight);">
    <i class="fas fa-arrow-circle-down fa-lg"></i>
  </div>
</div>
<app-footer></app-footer>
