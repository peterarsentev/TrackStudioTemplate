<div class="container-fluid">
  <div class="row">
    <div class="w-100 card">
      <div class="card-header">
        <span class="w-50 font-weight-bold">
          {{ solutionCommunity?.name }}
        </span><br/>
        <span class="text-muted small">
          Автор: {{ solutionCommunity?.userName }} | Решено: {{ solutionCommunity?.created | date:'dd.MM.yyyy hh:MM' }}
        </span><br/>
      </div>
      <div class="card-body">
        <div class="card-text" [innerHTML]="solutionCommunity?.description"></div>

        <span class="mr-auto font-weight-bold">Решение:</span>
        <div *ngIf="solutionCommunity?.solutionCodeId">
          <ngx-codemirror
            [(ngModel)]="solutionCommunity.solution"
            [options]="options"
          ></ngx-codemirror>
        </div>
      </div>
    </div>
  </div>

  <div class="row mt-3">
    <div class="card w-100">
      <div class="card-header">
        <div class="font-weight-bold">Комментарии</div>
      </div>
      <div class="card-body">
        <table class="table">
          <ng-container *ngFor="let operation of solutionCommunityOperations; let idx=index">
            <tr>
              <td>
                <div class="pb-3 small">
                  <span>
                    <span class="font-weight-bold" style="cursor: pointer;">
                      <i class="fa fa-user mr-1"></i>{{ operation.userName }}</span>
                  </span>
                  <span class="pull-right">{{ operation.created | date: 'dd.MM.yyyy HH:mm' }}</span>
                </div>
                <div [innerHTML]="operation.text | safeCode"></div>
              </td>
            </tr>
          </ng-container>
        </table>
      </div>
    </div>
  </div>

  <div class="row">
    <button (click)="showAddCommentForm(true)" class="pull-left btn btn-success btn-sm mt-2">
      Комментировать</button>
  </div>
  <div class="row" *ngIf="addFormComment">
    <app-discussion
      title="Комментарий"
      (closeEmitter)="saveComment($event)"
    ></app-discussion>
  </div>
</div>
