<div class="container-fluid">
  <div class="row">
    <table class="table">
      <thead>
      <tr>
        <th>
          {{ 'Уроков' }}: {{tasks.length}}
          <span class="pull-right text-center pl-3">
            <app-book-mark-star [name]="name"></app-book-mark-star>
          </span>
          <span  *ngIf="!isSearch" class="col-sm-1">
              <button type="button" class="m btn btn-light btn-sm pull-right ml-1"
                      (click)="goBackToList()"><i class="fas fa-angle-up pr-1"></i>К темам</button>
              <button *ngIf="task.nextId !== -1" type="button" class="ml-1 m btn btn-light btn-sm pull-right"
                      (click)="goBackToList(task.nextId)">Следующий<i class="fas fa-angle-right pl-1"></i></button>
              <button *ngIf="task.previousId !== -1" type="button" class="ml-1 m btn btn-light btn-sm pull-right"
                      (click)="goBackToList(task.previousId)"><i class="fas fa-angle-left pr-1"></i>Предыдущий</button>
          </span>
        </th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let task of tasks; let idx = index">
        <td>
          <div *ngIf="showNaw" class="row">
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb bg-white">
                <li class="breadcrumb-item small ref-link">
                  <a (click)="goToMain()">{{ 'Job4j' }}</a>
                </li>
                <li class="breadcrumb-item small ref-link">
                  <a (click)="goTo(task)">{{ task.task.topicName }}</a>
                </li>
                <li class="breadcrumb-item small"
                    [ngClass]="{'ref-link': false}">
                  <a>{{ task.task.name }}</a>
                </li>
              </ol>
            </nav>
          </div>
          <div>
            <i class="fas fa-tasks pr-3"></i>
            <a style="text-decoration: none;" [routerLink]="task.solution
            ? ['/exercise', task.task.topicId, 'task', task.task.id, task.solution.id]
             : ['/exercise', task.task.topicId, 'task-view', task.task.id]">
              <span class="font-weight-bold" style="text-decoration: none;">{{task.task.name}} &nbsp;{{getSolutionId(task)}}</span>
            </a>
            <i *ngIf="task.solution && task.task.updated > task.solution.updatedTime"
               title="Описание урока было обновлено"
               class="fas fa-recycle pl-2"></i>
          </div>
          <small class="mb-2 text-muted">
            <span *ngIf="task.status?.id == 1"
                     class="badge badge-danger ">{{ task.status?.statusName }}</span>
            <span *ngIf="task.status?.id == 3"
                  class="badge badge-success ">{{ task.status?.statusName }}</span>
            <span *ngIf="task.status?.id == 2"
                  class="badge badge-warning ">{{ task.status?.statusName }}</span>
            <span *ngIf="task.status?.id == 4"
                  class="badge badge-warning">{{ task.status?.statusName }}</span>
            <span *ngIf="task.solution">
              <span *ngIf="task.handler" class="">
                <i title="Ответственный" class="fas fa-user pl-2"></i> {{ task.handler.name }},
              </span>
              <span *ngIf="task.solution" class="">
                <i title="Ответственный" class="fas fa-hourglass-start pl-2"></i> {{ task.solution.createdTime | date: 'HH:mm dd.MM.yyyy' }},</span>
              <span *ngIf="task.solution" class="">
                <i title="Ответственный" class="fas fa-hourglass-3 pl-2"></i> {{  task.solution.updatedTime | date: 'HH:mm dd.MM.yyyy' }}</span>
            </span>
            <span *ngIf="task.rating">
              <span class="ml-3" >
                  <i *ngIf="task.rating?.vote !== 'DOWN'"
                     title="Урок ненравится" class="fa fa-thumbs-down text-muted"
                     style="cursor: pointer;"></i>
                  <i *ngIf="task.rating?.vote === 'DOWN'"
                     title="Урок ненравится" class="fa fa-thumbs-down text-danger" style="cursor: pointer;"></i>
                  <span class="ml-1 mr-2">{{ task.rating?.down }}</span>
                  <i *ngIf="task.rating?.vote !== 'UP'"
                     title="Урок нравится" class="fa fa-thumbs-up text-muted"
                     style="cursor: pointer;"></i>
                  <i *ngIf="task.rating?.vote === 'UP'"
                     title="Урок нравится" class="fa fa-thumbs-up text-primary"
                     style="cursor: pointer;"></i>
                  <span class="ml-1">{{ task.rating?.up }}</span>
              </span>
              <span *ngIf="task.discussCount">
                <i class="fa fa-comments-o ml-2 mr-2"
                   title="Количество обсуждений"
                ></i>{{ task.discussCount.count }}
              </span>

            </span>
          </small>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
